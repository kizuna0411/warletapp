# Warikan App (割り勘アプリ)  

**Warikan App**は、グループでの支払い管理と割り勘計算を自動化するモバイルアプリケーションです。友人同士の飲み会、旅行、その他のグループ活動での費用分担を簡単に管理できます。

## 📱 アプリの概要

このアプリは、複数人でのイベント参加時の支払い記録と精算を効率化することを目的として開発されました。各参加者が支払った金額を記録し、最終的に誰がどれだけ受け取る/支払うべきかを自動計算します。

### 🎯 主な機能

#### 👥 グループ管理

- **グループ作成**: 友人や同僚とのグループを作成
- **招待コード**: 6桁の招待コードでメンバーを簡単に招待
- **メンバー管理**: グループメンバーの参加・脱退管理
- **チャット機能**: グループ内でのリアルタイムメッセージ交換

#### 📅 イベント管理

- **イベント作成**: グループ内でのイベント（飲み会、旅行等）を作成
- **参加者選択**: イベントごとに参加メンバーを選択
- **イベント詳細**: 日程、場所、参加者の管理

#### 💳 支払い記録・割り勘計算

- **支払い記録**: 個別の支払いを簡単に記録
- **詳細な割り勘**: 支払いごとに割り勘対象者を個別選択可能
- **自動計算**: 複雑な割り勘も自動で精算額を計算
- **差額表示**: 各参加者の受取額/支払額を明確に表示
- **支払い履歴**: 過去の支払い記録の詳細確認

#### 💰 送金機能

- **送金ステータス管理**: 未送金→送金済み→確認済みのステータス管理
- **支払い方法**: PayPayID、銀行口座情報の登録・管理
- **送金確認**: 相手側での受取確認機能
- **取引履歴**: 送金・受取の履歴管理

#### 🔐 認証・プロファイル

- **メール認証**: メールアドレス・パスワードでのアカウント登録
- **Apple認証**: Apple IDでの簡単ログイン（iOS）
- **プロフィール管理**: アカウント名、アバター画像の設定
- **セキュリティ**: パスワード変更、アカウント削除機能

## 🛠 技術スタック

### フロントエンド

- **React Native**: クロスプラットフォームモバイル開発
- **Expo**: 開発・ビルド・デプロイメントプラットフォーム
- **React Navigation**: ナビゲーション管理
- **Expo Router**: ファイルベースルーティング

### バックエンド

- **Supabase**: BaaS（Backend as a Service）
- **PostgreSQL**: リレーショナルデータベース
- **Row Level Security**: データベースレベルでのセキュリティ
- **リアルタイム通信**: チャット機能でのリアルタイム更新

### 認証

- **Supabase Auth**: メール認証システム
- **Apple Authentication**: Apple IDログイン
- **JWT**: セッション管理

### データ管理

- **AsyncStorage**: ローカルデータ永続化
- **React Hooks**: 状態管理（useState, useEffect, useCallback）
- **Custom Hooks**: 再利用可能なロジック

## 🏗 アーキテクチャ

### データベース設計

```
users_info: ユーザー情報
group_info: グループ情報
group_member: グループメンバー関連
event_info: イベント情報
event_member: イベント参加者関連
payment_info: 支払い記録
chat: チャットメッセージ
payment_settings: 支払い方法設定
transaction_info: 送金取引記録
```

### アプリケーション構造

```
app/
├── (auth)/          # 認証関連画面
├── (tabs)/          # メインタブナビゲーション
│   ├── home/        # ホーム機能群
│   ├── setting/     # 設定・プロフィール
│   └── payment/     # 送金機能
├── utils/           # ユーティリティ関数
└── _layout.js       # ルートレイアウト
```

## 💡 ビジネスロジック

### 割り勘計算アルゴリズム

1. **支払い記録の集計**: 各参加者の支払い総額を計算
2. **負担額の分散**: 選択された参加者間での費用分担
3. **差額の算出**: 支払い額 - 負担額 = 受取額/支払額
4. **最適化**: 送金回数を最小化する精算提案

### セキュリティ設計

- **認証**: Supabaseの堅牢な認証システム
- **認可**: Row Level Securityによるデータアクセス制御
- **データ暗号化**: 通信・保存時の暗号化
- **プライバシー**: ユーザーデータの適切な管理

## 📋 開発・デプロイ

### 環境設定

```bash
# 依存関係のインストール
npm install

# 環境変数の設定
cp .env.example .env
# EXPO_PUBLIC_SUPABASE_URL と EXPO_PUBLIC_SUPABASE_ANON_KEY を設定

# 開発サーバーの起動
npx expo start
```

### コード品質管理

- **ESLint**: コード品質チェック
- **Prettier**: コードフォーマット
- **Git Hooks**: コミット前の品質チェック

### テスト・デプロイ

- **Expo Go**: 開発時のテスト環境
- **EAS Build**: 本番ビルド・配信
- **App Store/Google Play**: アプリストア配信対応

## 🎨 ユーザーインターフェース

### デザイン思想

- **直感的な操作**: 複雑な計算も簡単な操作で実現
- **モダンなUI**: Material DesignとHuman Interface Guidelinesに準拠
- **レスポンシブ**: 様々な画面サイズに対応
- **アクセシビリティ**: すべてのユーザーが使いやすい設計

### カラーテーマ

- **プライマリ**: #3d547f（深いブルー）
- **セカンダリ**: #8B9DC3（ライトブルー）
- **アクセント**: グリーン（受取）、レッド（支払い）
- **背景**: クリーンな白ベース

## 🚀 今後の拡張予定

- **多通貨対応**: 海外旅行での利用
- **OCRレシート読取**: レシート撮影での自動入力
- **通知システム**: プッシュ通知での支払いリマインダー
- **レポート機能**: 月次/年次の支出分析
- **API連携**: 銀行API、決済API連携

---

このアプリケーションは、友人同士の金銭管理を透明化し、グループ活動をより楽しくスムーズにすることを目指しています。技術的な堅牢性とユーザビリティの両立を図り、継続的な改善を行っています。
